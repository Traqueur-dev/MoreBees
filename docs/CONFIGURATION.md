# MoreBees Configuration Guide

Complete reference for all MoreBees configuration files with examples and best practices.

## Table of Contents

- [Configuration Files Overview](#configuration-files-overview)
- [config.yml](#configyml)
- [breeds.yml](#breedsyml)
- [upgrades.yml](#upgradesyml)
- [messages.yml](#messagesyml)
- [ItemStackWrapper Format](#itemstackwrapper-format)
- [Advanced Configuration](#advanced-configuration)

## Configuration Files Overview

MoreBees uses four YAML configuration files:

| File           | Purpose                         | Auto-Generated |
|----------------|---------------------------------|----------------|
| `config.yml`   | Main settings, bee types, tools | Yes            |
| `breeds.yml`   | Breeding rules and mutations    | Yes            |
| `upgrades.yml` | Beehive upgrade definitions     | Yes            |
| `messages.yml` | Translatable messages           | Yes            |

All files support:
- **MiniMessage** color/formatting tags
- **Hot reload** via `/morebees reload` command
- **Validation** on load with error messages
- **Comments** for documentation (preserved on save)

## config.yml

Main configuration file containing global settings, bee types, and tools.

### Structure

```yaml
# Enable debug logging
debug: false

# ModelEngine animation for flying bees
fly-animation: "fly"

# Bee type definitions
bees: [ ... ]

# Bee tools
bee-box: { ... }
bee-box-size: 10
bee-jar: { ... }

# Optional beehive lore
beehive-lore: [ ... ]
```

### Global Settings

#### debug
```yaml
debug: false
```
- **Type**: Boolean
- **Default**: `false`
- **Description**: Enable verbose logging for troubleshooting
- **Usage**: Set to `true` to see detailed logs in console

#### fly-animation
```yaml
fly-animation: "fly"
```
- **Type**: String
- **Default**: `"fly"`
- **Description**: ModelEngine animation name for flying bees
- **Requires**: ModelEngine plugin installed
- **Usage**: Must match animation name in your ModelEngine models

### Bee Type Definitions

#### Complete Bee Example

```yaml
bees:
  - type: "redstone-bee"
    model-id: 1001
    display-name: "<red>Redstone Bee"
    foods:
      - REDSTONE
      - REDSTONE_BLOCK
    flowers:
      - REDSTONE_ORE
      - DEEPSLATE_REDSTONE_ORE
      - REDSTONE_BLOCK
    product:
      honey:
        material: HONEYCOMB
        name: "<red>Redstone Honeycomb"
        lore:
          - "<gray>A sweet honeycomb"
          - "<gray>infused with redstone energy"
        model-id: 1001
      honey-block:
        material: HONEYCOMB_BLOCK
        name: "<red>Redstone Honeycomb Block"
        model-id: 1002
      additional:
        material: REDSTONE_ORE
        name: "<red>Redstone Ore"
    model: "redstone_bee"
```

#### Field Reference

##### type
```yaml
type: "redstone-bee"
```
- **Type**: String (required, unique)
- **Description**: Unique identifier for the bee type
- **Naming**: Use lowercase with hyphens (kebab-case)
- **Usage**: Referenced in commands, breeds, mutations

##### model-id
```yaml
model-id: 1001
```
- **Type**: Integer (optional)
- **Description**: CustomModelData for spawn egg visual
- **Range**: Any integer
- **Usage**: Match with resource pack custom models

##### display-name
```yaml
display-name: "<red>Redstone Bee"
```
- **Type**: String (required)
- **Description**: Human-readable bee name
- **Format**: MiniMessage tags supported
- **Examples**:
  - `"<gradient:red:gold>Fire Bee</gradient>"`
  - `"<rainbow>Rainbow Bee"`
  - `"<bold><blue>Ice Bee"`

##### foods
```yaml
foods:
  - REDSTONE
  - REDSTONE_BLOCK
```
- **Type**: String list (required)
- **Description**: Items players can feed to this bee
- **Values**: Bukkit Material names or custom item IDs
- **Usage**: Right-click bee with food to breed/grow
- **Notes**:
  - Supports custom items from ItemsAdder, Oraxen, Nexo
  - Format: `namespace:item_id` for custom items

##### flowers
```yaml
flowers:
  - REDSTONE_ORE
  - REDSTONE_BLOCK
```
- **Type**: String list (required)
- **Description**: Blocks this bee pollinates
- **Values**: Bukkit Material names or custom block IDs
- **Usage**: Bee seeks these blocks and collects nectar
- **Notes**:
  - Supports custom blocks from ItemsAdder, Oraxen, Nexo
  - Format: `namespace:block_id` for custom blocks

##### product
```yaml
product:
  honey: { ... }
  honey-block: { ... }
  additional: { ... }
```
- **Type**: Object (required)
- **Description**: Products generated by this bee type
- **Fields**:
  - `honey`: Single honeycomb item
  - `honey-block`: Honeycomb block item (optional)
  - `additional`: Extra product (e.g., ore, gem)

See [ItemStackWrapper Format](#itemstackwrapper-format) for product field structure.

##### model
```yaml
model: "redstone_bee"
```
- **Type**: String (optional)
- **Description**: ModelEngine model ID
- **Requires**: ModelEngine plugin installed
- **Usage**: Replaces bee entity with 3D model
- **Notes**: Must match model registered in ModelEngine

### Tool Configuration

#### Bee Box

```yaml
bee-box:
  material: CHEST
  name: "<gold><bold>Bee Box"
  lore:
    - "<gray>A box for storing bees"
    - "<gray>Capacity: <yellow>%max_bees%"
  model-id: 2001

bee-box-size: 10
```

**Fields:**
- `bee-box`: ItemStackWrapper for the tool item
- `bee-box-size`: Maximum bees storable (integer)

**Usage:**
- Right-click bee to capture
- Right-click air to release one
- Sneak + Right-click to release all
- Lore automatically shows captured bees

#### Bee Jar

```yaml
bee-jar:
  material: GLASS_BOTTLE
  name: "<aqua><bold>Bee Jar"
  lore:
    - "<gray>A jar for storing one bee"
  model-id: 2002
```

**Fields:**
- `bee-jar`: ItemStackWrapper for the tool item

**Capacity:** Always 1 bee (hardcoded)

### Beehive Lore

```yaml
beehive-lore:
  - "<yellow>Custom Beehive"
  - "<gray>Right-click to inspect"
```

**Type:** String list (optional)
**Description:** Additional lore added to beehive items
**Format:** MiniMessage tags supported
**Usage:** Helps players identify upgraded beehives

## breeds.yml

Defines breeding rules and mutation triggers.

### Structure

```yaml
breeds:
  - parents: [...]
    child: "..."
    chance: 0.5

mutations:
  - parent: "..."
    child: "..."
    blocks: [...]
```

### Breeding Rules

#### Complete Breed Example

```yaml
breeds:
  - parents:
      - "redstone-bee"
      - "diamond-bee"
    child: "emerald-bee"
    chance: 0.25
```

#### Field Reference

##### parents
```yaml
parents:
  - "redstone-bee"
  - "diamond-bee"
```
- **Type**: String list (required, exactly 2)
- **Description**: Bee types that can breed together
- **Order**: Doesn't matter (order is normalized)
- **Validation**: Both types must exist in `config.yml`

##### child
```yaml
child: "emerald-bee"
```
- **Type**: String (required)
- **Description**: Resulting bee type
- **Validation**: Must exist in `config.yml`

##### chance
```yaml
chance: 0.25
```
- **Type**: Double (required)
- **Range**: 0.0 to 1.0
- **Description**: Probability of special breed
- **Examples**:
  - `0.0` = Never (always inherit parent)
  - `0.25` = 25% chance
  - `0.5` = 50% chance
  - `1.0` = Always

**Fallback Behavior:** If chance fails, baby randomly inherits one parent's type.

#### Breeding Examples

**Common Offspring (75% chance):**
```yaml
- parents: ["bee-a", "bee-b"]
  child: "bee-c"
  chance: 0.75
```

**Rare Offspring (10% chance):**
```yaml
- parents: ["common-bee", "common-bee"]
  child: "rare-bee"
  chance: 0.1
```

**Same-Type Breeding:**
```yaml
- parents: ["gold-bee", "gold-bee"]
  child: "gold-bee"
  chance: 1.0
```

### Mutation Rules

#### Complete Mutation Example

```yaml
mutations:
  - parent: "redstone-bee"
    child: "diamond-bee"
    blocks:
      - DIAMOND_ORE
      - DEEPSLATE_DIAMOND_ORE
      - DIAMOND_BLOCK
```

#### Field Reference

##### parent
```yaml
parent: "redstone-bee"
```
- **Type**: String (required)
- **Description**: Starting bee type
- **Validation**: Must exist in `config.yml`

##### child
```yaml
child: "diamond-bee"
```
- **Type**: String (required)
- **Description**: Mutated bee type
- **Validation**: Must exist in `config.yml`

##### blocks
```yaml
blocks:
  - DIAMOND_ORE
  - DEEPSLATE_DIAMOND_ORE
```
- **Type**: String list (required)
- **Description**: Blocks that trigger mutation
- **Values**: Bukkit Material names or custom block IDs
- **Usage**: Bee with nectar flies over these blocks
- **Effect**: Block is destroyed, bee drops child egg
- **Notes**: Supports custom blocks (ItemsAdder, Oraxen, Nexo)

#### Mutation Examples

**Ore-Based Mutation:**
```yaml
- parent: "stone-bee"
  child: "iron-bee"
  blocks:
    - IRON_ORE
    - DEEPSLATE_IRON_ORE
```

**Multiple Mutation Paths:**
```yaml
- parent: "base-bee"
  child: "fire-bee"
  blocks:
    - LAVA
    - MAGMA_BLOCK

- parent: "base-bee"
  child: "ice-bee"
  blocks:
    - ICE
    - PACKED_ICE
```

## upgrades.yml

Defines beehive upgrade items and their effects.

### Structure

```yaml
upgrades:
  - id: "..."
    max-bees: 5
    production-multiplier: 1.5
    produce-blocks: true
    item: { ... }
```

### Complete Upgrade Example

```yaml
upgrades:
  - id: "level-1"
    max-bees: 5
    production-multiplier: 1.5
    produce-blocks: false
    item:
      material: COPPER_INGOT
      name: "<gold>Beehive Upgrade - Level 1"
      lore:
        - "<gray>Max Bees: <yellow>5"
        - "<gray>Production: <yellow>1.5x"
        - ""
        - "<gray>Right-click beehive to apply"
      model-id: 3001

  - id: "level-2"
    max-bees: 7
    production-multiplier: 2.0
    produce-blocks: true
    item:
      material: GOLD_INGOT
      name: "<gold>Beehive Upgrade - Level 2"
      lore:
        - "<gray>Max Bees: <yellow>7"
        - "<gray>Production: <yellow>2.0x"
        - "<gray>Produces: <yellow>Honey Blocks"
        - ""
        - "<gray>Right-click beehive to apply"
      model-id: 3002
```

### Field Reference

#### id
```yaml
id: "level-1"
```
- **Type**: String (required, unique)
- **Description**: Unique identifier for upgrade
- **Naming**: Use lowercase with hyphens
- **Usage**: Referenced in commands

#### max-bees
```yaml
max-bees: 5
```
- **Type**: Integer (required)
- **Default**: 3 (vanilla beehive)
- **Range**: 1 to 10 (recommended)
- **Description**: Maximum bees that can occupy hive
- **Effect**: Higher capacity = more honey production

#### production-multiplier
```yaml
production-multiplier: 1.5
```
- **Type**: Double (required)
- **Default**: 1.0 (vanilla speed)
- **Range**: 0.1 to 10.0 (recommended)
- **Description**: Honey production speed multiplier
- **Examples**:
  - `0.5` = 50% slower (half speed)
  - `1.0` = Normal speed
  - `1.5` = 50% faster
  - `2.0` = 2x faster (double speed)

#### produce-blocks
```yaml
produce-blocks: true
```
- **Type**: Boolean (required)
- **Default**: `false`
- **Description**: Enable honey block production
- **Effect**:
  - `true`: Hive can produce both honey and honey blocks
  - `false`: Only produces regular honey

#### item
```yaml
item:
  material: COPPER_INGOT
  name: "<gold>Upgrade Name"
  lore: [...]
  model-id: 3001
```
- **Type**: ItemStackWrapper (required)
- **Description**: The upgrade item players receive
- See [ItemStackWrapper Format](#itemstackwrapper-format)

### Upgrade Progression Example

```yaml
upgrades:
  # Starter upgrade
  - id: "basic"
    max-bees: 4
    production-multiplier: 1.2
    produce-blocks: false
    item: { material: COPPER_INGOT, name: "<gold>Basic Upgrade" }

  # Mid-tier upgrade
  - id: "advanced"
    max-bees: 6
    production-multiplier: 1.75
    produce-blocks: true
    item: { material: GOLD_INGOT, name: "<gold>Advanced Upgrade" }

  # End-game upgrade
  - id: "supreme"
    max-bees: 10
    production-multiplier: 3.0
    produce-blocks: true
    item: { material: NETHERITE_INGOT, name: "<gold>Supreme Upgrade" }
```

## messages.yml

Translatable messages for commands and feedback.

### Structure

```yaml
prefix: "<gold>[MoreBees] "

command:
  egg: { ... }
  spawn: { ... }
  honey: { ... }
  tool: { ... }
  upgrade: { ... }
  reload: { ... }
```

### Message Format

All messages support:
- **MiniMessage** tags for colors/formatting
- **Placeholders** for dynamic values
- **Multi-line** text with `\n`

### Common Placeholders

| Placeholder  | Description           | Example        |
|--------------|-----------------------|----------------|
| `%player%`   | Target player name    | `Steve`        |
| `%bee_type%` | Bee type display name | `Redstone Bee` |
| `%amount%`   | Item quantity         | `5`            |
| `%tool%`     | Tool type name        | `BEE_JAR`      |
| `%upgrade%`  | Upgrade ID            | `level-1`      |
| `%max_bees%` | Tool/hive capacity    | `10`           |

### Example Messages

```yaml
prefix: "<gold>[MoreBees] "

command:
  egg:
    usage: "<red>Usage: /morebees egg <player> <beetype> [amount]"
    success: "<green>Gave %amount%x %bee_type% egg to %player%"

  spawn:
    usage: "<red>Usage: /morebees spawn <beetype> [baby]"
    success: "<green>Spawned %bee_type%"

  reload:
    success: "<green>Configuration reloaded successfully!"

tool:
  full: "<red>This tool is full!"
  empty: "<red>This tool is empty!"
  caught: "<green>Caught %bee_type%!"
  released: "<green>Released bee!"
  content: "<gray>Contents:\n%bees%"
```

## ItemStackWrapper Format

Reusable format for defining items in configuration.

### Complete Format

```yaml
material: MATERIAL_NAME
name: "<color>Display Name"
lore:
  - "<gray>Lore line 1"
  - "<gray>Lore line 2"
model-id: 12345
```

### Field Reference

#### material
```yaml
material: HONEYCOMB
```
- **Type**: String (required)
- **Values**:
  - Bukkit Material name (e.g., `DIAMOND`, `STONE`)
  - Custom item ID (e.g., `itemsadder:ruby`, `oraxen:emerald_sword`)
- **Validation**: Material/item must exist

#### name
```yaml
name: "<red>Redstone Honeycomb"
```
- **Type**: String (optional)
- **Description**: Item display name
- **Format**: MiniMessage tags supported
- **Default**: Material's default name if omitted

#### lore
```yaml
lore:
  - "<gray>First line"
  - "<gray>Second line"
  - ""
  - "<yellow>Third line after blank"
```
- **Type**: String list (optional)
- **Description**: Item lore (tooltip text)
- **Format**: MiniMessage tags supported
- **Notes**: Empty strings create blank lines

#### model-id
```yaml
model-id: 1001
```
- **Type**: Integer (optional)
- **Description**: CustomModelData NBT value
- **Usage**: Link to resource pack models
- **Range**: Any integer

### Examples

**Simple Item (vanilla):**
```yaml
material: DIAMOND
```

**Renamed Item:**
```yaml
material: STICK
name: "<gold>Magic Wand"
```

**Custom Model Item:**
```yaml
material: IRON_INGOT
name: "<aqua>Custom Coin"
model-id: 5001
```

**Custom Plugin Item:**
```yaml
material: itemsadder:ruby
name: "<red>Ruby Gem"
lore:
  - "<gray>A precious red gem"
```

**Complete Item:**
```yaml
material: HONEYCOMB
name: "<gradient:gold:yellow>Golden Honeycomb"
lore:
  - "<gray>A rare honeycomb variant"
  - "<gray>produced by special bees"
  - ""
  - "<gold>Crafting Ingredient"
model-id: 2001
```

## Advanced Configuration

### MiniMessage Tags

Commonly used formatting tags:

**Colors:**
```
<red>, <green>, <blue>, <yellow>, <aqua>, <gold>
<dark_red>, <dark_green>, <dark_blue>, <gray>, <dark_gray>
<white>, <black>
```

**Gradients:**
```
<gradient:red:blue>Text</gradient>
<gradient:#FF0000:#0000FF>Hex colors</gradient>
```

**Rainbow:**
```
<rainbow>Rainbow text</rainbow>
<rainbow:!>Inverted rainbow</rainbow:!>
```

**Formatting:**
```
<bold>Bold</bold>
<italic>Italic</italic>
<underlined>Underlined</underlined>
<strikethrough>Strikethrough</strikethrough>
<obfuscated>Random</obfuscated>
```

**Reset:**
```
<reset>Removes all formatting</reset>
```

### Custom Item Integration

#### ItemsAdder
```yaml
material: "itemsadder:namespace:item_id"
```

#### Oraxen
```yaml
material: "oraxen:item_id"
```

#### Nexo
```yaml
material: "nexo:item_id"
```

**Note:** Custom items require the respective plugin installed.

### Performance Considerations

**Bee Type Count:**
- 5-10 types: Excellent
- 11-25 types: Good
- 26-50 types: Moderate
- 50+ types: May impact recipe load time

**Breeding Complexity:**
- Keep breed rules under 50 for best performance
- Complex probability chains may cause lag

**Mutation Blocks:**
- Limit to 5-10 block types per mutation
- Too many triggers = more block checks

### Configuration Tips

1. **Use Comments**: Document complex settings
2. **Test Incrementally**: Add one bee type at a time
3. **Validate YAML**: Use online validators to check syntax
4. **Backup Configs**: Before major changes
5. **Reload Often**: Use `/morebees reload` to test changes
6. **Check Console**: Validation errors appear on reload

### Common Mistakes

❌ **Invalid YAML indentation:**
```yaml
bees:
- type: "bee"  # Wrong: should be indented
```

✅ **Correct indentation:**
```yaml
bees:
  - type: "bee"
```

❌ **Missing required fields:**
```yaml
- type: "bee"
  # Missing foods, flowers, product
```

✅ **All required fields:**
```yaml
- type: "bee"
  display-name: "Bee"
  foods: [...]
  flowers: [...]
  product: { ... }
```

❌ **Invalid bee type reference:**
```yaml
breeds:
  - parents: ["nonexistent-bee", "other-bee"]  # Error
```

✅ **Valid references:**
```yaml
breeds:
  - parents: ["redstone-bee", "diamond-bee"]
```

## Next Steps

- **Test Configuration**: Use `/morebees reload` and check console
- **Explore Examples**: See community configs on Discord
- **API Integration**: Read [API.md](API.md) for plugin development
- **Hooks Setup**: Check [HOOKS.md](HOOKS.md) for custom items